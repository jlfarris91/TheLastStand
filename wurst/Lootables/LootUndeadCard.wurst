package LootUndeadCard
import Lootables
import SpawnUndeadUnitDirector
import Func
import Directors
import ItemSet

// ============================================================================
public class LootUndeadCard extends LootCard
  private ItemSet m_itemSet
  private Func2<unit, unit, SpawnUndeadUnitDirector> m_spawnDirectorFactory

  // --------------------------------------------------------------------------
  construct(string id, ItemSet itemSet, Func2<unit, unit, SpawnUndeadUnitDirector> spawnDirectorFactory)
    super(id)
    m_itemSet = itemSet
    m_spawnDirectorFactory = spawnDirectorFactory.acquire()

  // --------------------------------------------------------------------------
  ondestroy
  
    if (m_spawnDirectorFactory != null)
      m_spawnDirectorFactory.release()
      m_spawnDirectorFactory = null

  // --------------------------------------------------------------------------
  override function giveReward(unit lootable, unit looter) returns bool

    let director = m_spawnDirectorFactory.call(lootable, looter)
    director.setEnabled(true)

    return true
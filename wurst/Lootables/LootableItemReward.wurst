package LootableItemReward
import LootableReward
import MainItemLibrary
import ErrorHandling
import FX
import DisplayTextToPlayer
import LootableUnit
import UnitMetadata

// ============================================================================
public class LootableItemReward implements ILootableReward
  private ItemChances _itemChances

  // --------------------------------------------------------------------------
  function getItemChances() returns ItemChances
    return _itemChances

  // --------------------------------------------------------------------------
  function setItemChances(ItemChances chances)
    _itemChances = chances

  // --------------------------------------------------------------------------
  override function giveReward(LootableUnit lootable, IUnitMetadata looter)
    let itm = g_MainItemLibrary.giveRandomItemToUnit(looter.getUnit(), _itemChances)

    if (itm == null)
      error("No item could be found in main item library")

    FX.createFoundItemTag(looter.getX(), looter.getY(), looter.getOwner())
    displayMessageToPlayer(looter.getOwner(), "Found " + itm.getName())
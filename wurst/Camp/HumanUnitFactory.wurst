package HumanUnitFactory
import TlsUnitIds
import UnitMetadata
import Unit_GateCommon

import initlater GateComponent
import initlater ChestComponent
import initlater Hero
import initlater SurvivorUnit
import Unit_WoodFence

import SpikesComponent
import TentComponent
import RangedTargetComponent
import CampCenterComponent

// ============================================================================
public class HumanUnitFactory implements IUnitMetadataFactory

  // --------------------------------------------------------------------------
  override function createUnit(unit u) returns IUnitMetadata
    let unitTypeId = u.getTypeId()

    if (u.isCampHeadquarters())
      let metadata = new UnitMetadata()
      metadata.addComponent(new CampCenterComponent(metadata))
      return metadata

    switch (unitTypeId)

      case TlsUnitIds.chest
        let metadata = new UnitMetadata()
        metadata.addComponent(new ChestComponent(metadata))
        return metadata

      case TlsUnitIds.spikes[0] | TlsUnitIds.spikes[1] | TlsUnitIds.spikes[2] | TlsUnitIds.spikes[3] | TlsUnitIds.spikes[4]
        let metadata = new UnitMetadata()
        metadata.addComponent(new SpikesComponent(metadata))
        return metadata

      case TlsUnitIds.shelter1
        let metadata = new UnitMetadata()
        metadata.addComponent(new TentComponent(metadata))
        return metadata

      case TlsUnitIds.rangedTarget
        let metadata = new UnitMetadata()
        metadata.addComponent(new RangedTargetComponent(metadata))
        return metadata

    if (u.isSurvivor())
      return new Survivor()

    if (u.isGate())
      let metadata = new UnitMetadata()
      metadata.addComponent(new GateComponent(metadata))
      return metadata

    if (unitTypeId == TlsUnitIds.hero)
      return new Hero()

    if (unitTypeId == TlsUnitIds.barricade1 or
        unitTypeId == TlsUnitIds.campFire or
        unitTypeId == TlsUnitIds.scoutTower1 or
        unitTypeId == TlsUnitIds.scoutTower2 or
        unitTypeId == TlsUnitIds.scoutTower3 or
        unitTypeId == TlsUnitIds.scoutTower4 or
        unitTypeId == TlsUnitIds.scoutTower5 or
        unitTypeId == TlsUnitIds.turretPortable or
        unitTypeId == TlsUnitIds.turretPowered or
        unitTypeId == TlsUnitIds.turretUnpowered or
        unitTypeId == TlsUnitIds.lampPowered or
        unitTypeId == TlsUnitIds.lampUnpowered or
        unitTypeId == TlsUnitIds.generator or
        unitTypeId == TlsUnitIds.spearmansTent or
        u.isWoodFence())
      return new UnitMetadata()

    return null
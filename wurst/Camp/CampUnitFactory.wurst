package CampUnitFactory
import TlsUnitIds
import UnitMetadata
import initlater Gate
import initlater Wall
import initlater AidStation
import initlater GunLab
import initlater Chest
import initlater Spikes
import initlater Workshop
import initlater Camp
import initlater Hero

public class CampUnitFactory implements IUnitMetadataFactory
  override function createUnit(unit u) returns IUnitMetadata
    let camp = u.getOwner().getCamp()
    if (camp == null)
      return null

    let unitId = u.getTypeId()
    ICampUnitMetadata metadata = null

    switch (unitId)
      case TlsUnitIds.aidStation
        metadata = new AidStation(camp, u)
      case TlsUnitIds.chest
        metadata = new Chest(camp, u)
      case TlsUnitIds.gunlab
        metadata = new GunLab(camp, u)
      case TlsUnitIds.spikes
        metadata = new Spikes(camp, u)
      case TlsUnitIds.workshop
        metadata = new Workshop(camp, u)
      case TlsUnitIds.survivor
        metadata = new Survivor(camp, u)
      case TlsUnitIds.survivorBuilder
        metadata = new Survivor(camp, u)
      case TlsUnitIds.survivorMarksman
        metadata = new Survivor(camp, u)
      case TlsUnitIds.survivorMedic
        metadata = new Survivor(camp, u)

    if (unitId == TlsUnitIds.gateHorizontalBuild or
        unitId == TlsUnitIds.gateHorizontalOpen or
        unitId == TlsUnitIds.gateHorizontalClosed or
        unitId == TlsUnitIds.gateDiagonalOpen or
        unitId == TlsUnitIds.gateDiagonalClosed)
      print("Creating Gate")
      metadata = new Gate(camp, u)

    if (unitId == TlsUnitIds.wallCorner or
        unitId == TlsUnitIds.wallHorizontal)
      print("Creating Wall")
      metadata = new Wall(camp, u)

    if (unitId == TlsUnitIds.hero)
      print("Creating Hero")
      metadata = new Hero(camp, u)

    if (metadata != null)
      camp.addUnit(metadata)

    return metadata


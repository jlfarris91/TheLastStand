package FuncUnitTypeProvider
import Vector
import Func
import WaveSpawning

Vector<int> g_temp = new Vector<int>(1)

// ============================================================================
public class FuncUnitTypeProvider implements ISpawnWaveUnitTypeProvider
  private Func3<SpawnWaveContext, int, Vector<int>, int> m_func

  // --------------------------------------------------------------------------
  construct(Func3<SpawnWaveContext, int, Vector<int>, int> func)
    m_func = func.acquire()

  // --------------------------------------------------------------------------
  ondestroy
    m_func.release()
    m_func = null

  // --------------------------------------------------------------------------
  override function getUnitType(SpawnWaveContext context) returns int
    m_func.call(context, 1, g_temp)
    return g_temp.get(0)

  // --------------------------------------------------------------------------
  override function getUnitTypes(SpawnWaveContext context, int count, Vector<int> output) returns int
    return m_func.call(context, count, output)
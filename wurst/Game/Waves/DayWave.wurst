package DayWave
import Wave
import ClosureTimers

// ============================================================================
public class DayWave extends Wave
  private int m_day
  private real m_timeOfDayScalePercent

  // --------------------------------------------------------------------------
  construct(int day)
    m_day = day
    m_timeOfDayScalePercent = 100.0

  // --------------------------------------------------------------------------
  function getDay() returns int
    return m_day

  // --------------------------------------------------------------------------
  function getTimeOfDayScalePercent() returns real
    return m_timeOfDayScalePercent

  // --------------------------------------------------------------------------
  function setTimeOfDayScalePercent(real value)
    m_timeOfDayScalePercent = value

  // --------------------------------------------------------------------------
  override function onStarted()
    super.onStarted()

    // Have to wait for some reason
    doAfter(0.1) ->
      SetTimeOfDayScalePercentBJ(m_timeOfDayScalePercent)
      FogEnableOff()
      FogMaskEnableOff()

      // Reset fog
      SetTerrainFogExBJ( 0, 0.0, 10000.0, 0.0, 0, 0, 0 )
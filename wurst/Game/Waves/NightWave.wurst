package NightWave
import Wave
import ClosureTimers

// ============================================================================
public class NightWave extends Wave
  private int m_night
  private real m_timeOfDayScalePercent

  // --------------------------------------------------------------------------
  construct(int night)
    m_night = night
    m_timeOfDayScalePercent = 100.0

  // --------------------------------------------------------------------------
  function getNight() returns int
    return m_night

  // --------------------------------------------------------------------------
  function getTimeOfDayScalePercent() returns real
    return m_timeOfDayScalePercent

  // --------------------------------------------------------------------------
  function setTimeOfDayScalePercent(real value)
    m_timeOfDayScalePercent = value

  // --------------------------------------------------------------------------
  override function onStarted()
    super.onStarted()

    // Have to wait for some reason
    doAfter(0.1) ->
      SetTimeOfDayScalePercentBJ(m_timeOfDayScalePercent)
      FogEnableOn()
      FogMaskEnableOn()
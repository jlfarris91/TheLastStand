package SingleUnitTypeProvider
import IUnitTypeProvider
import ErrorHandling
import LinkedList

// ============================================================================
public class SingleUnitTypeProvider implements IUnitTypeProvider
  private constant int INVALID_UNIT_TYPE = -1
  private int _unitType
  
  // --------------------------------------------------------------------------
  construct()
    _unitType = INVALID_UNIT_TYPE

  // --------------------------------------------------------------------------
  ondestroy
    _unitType = INVALID_UNIT_TYPE

  // --------------------------------------------------------------------------
  function setUnitType(int unitType)
    _unitType = unitType

  // --------------------------------------------------------------------------
  override function getUnitType() returns int
    if (_unitType == -1)
      error("[SingleUnitTypeProvider] Unit type was never set!")
    return _unitType

  // --------------------------------------------------------------------------
  override function getUnitTypes(int count) returns LinkedList<int>
    let output = new LinkedList<int>()
    for i = 0 to count - 1
      output.add(_unitType)
    return output
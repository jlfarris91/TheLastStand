package RandomUnitTypeProvider
import WaveSpawning
import WeightedSet
import Vector

// ============================================================================
public class RandomUnitTypeProvider implements ISpawnWaveUnitTypeProvider
  private WeightedSet<int> m_unitTypeIds

  // --------------------------------------------------------------------------
  construct()
    m_unitTypeIds = new WeightedSet<int>()

  // --------------------------------------------------------------------------
  ondestroy
    destroy m_unitTypeIds
    m_unitTypeIds = null

  // --------------------------------------------------------------------------
  override function getUnitType(SpawnWaveContext context) returns int
    return m_unitTypeIds.getRandom()

  // --------------------------------------------------------------------------
  override function getUnitTypes(SpawnWaveContext context, int count, Vector<int> output) returns int
    return m_unitTypeIds.getRandom(count, output)

  // --------------------------------------------------------------------------
  function addUnitType(int unitId, real weight)
    m_unitTypeIds.add(unitId, weight)

  // --------------------------------------------------------------------------
  function removeUnitType(int unitId) returns bool
    return m_unitTypeIds.remove(unitId)
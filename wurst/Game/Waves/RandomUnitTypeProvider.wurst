package RandomUnitTypeProvider
import WeightedSet
import IUnitTypeProvider
import LinkedList

// ============================================================================
public class RandomUnitTypeProvider implements IUnitTypeProvider
  private WeightedSet<int> _unitTypeIds

  // --------------------------------------------------------------------------
  construct()
    _unitTypeIds = new WeightedSet<int>()

  // --------------------------------------------------------------------------
  ondestroy
    destroy _unitTypeIds
    _unitTypeIds = null

  // --------------------------------------------------------------------------
  override function getUnitType() returns int
    return _unitTypeIds.getRandom()

  // --------------------------------------------------------------------------
  override function getUnitTypes(int count) returns LinkedList<int>
    return _unitTypeIds.getRandom(count)

  // --------------------------------------------------------------------------
  function addUnitType(int unitId, real weight)
    _unitTypeIds.add(unitId, weight)

  // --------------------------------------------------------------------------
  function removeUnitType(int unitId) returns bool
    return _unitTypeIds.remove(unitId)
package RandomUnitTypeProvider
import ISpawnWave
import WeightedSet
import Vector

// ============================================================================
public class RandomUnitTypeProvider implements ISpawnWaveUnitTypeProvider
  private WeightedSet<int> m_unitTypeIds

  // --------------------------------------------------------------------------
  construct()
    m_unitTypeIds = new WeightedSet<int>()

  // --------------------------------------------------------------------------
  ondestroy
    destroy m_unitTypeIds
    m_unitTypeIds = null

  // --------------------------------------------------------------------------
  override function getUnitTypes(ISpawnWaveContext context, int count) returns Vector<int>
    return m_unitTypeIds.getRandom(count)

  // --------------------------------------------------------------------------
  function addUnitType(int unitId, real weight)
    m_unitTypeIds.add(unitId, weight)

  // --------------------------------------------------------------------------
  function removeUnitType(int unitId) returns bool
    return m_unitTypeIds.remove(unitId)
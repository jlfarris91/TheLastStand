package Difficulties
import TlsItemLibrary
import Math
import GameConstants

itemChances g_itemChancesStart = itemChances(8.0, 4.0, 2.0, 1.0)
itemChances g_itemChancesEnd = itemChances(1.0, 4.0, 5.0, 3.0)

// ============================================================================
public class DifficultyScaling

  // --------------------------------------------------------------------------
  static function getGeneralDifficultyCoeff(real difficulty, int playerCount) returns real
    let playerFactor = parameterize(1, MAX_PLAYER_COUNT, playerCount) * 0.5
    return 1 + playerFactor + difficulty * 0.65

  // --------------------------------------------------------------------------
  static function getGeneralDifficultyCoeff(real gameProgress, real difficulty, int playerCount) returns real
    let playerFactor = parameterize(1, MAX_PLAYER_COUNT, playerCount) * 0.5
    // return (playerFactor + gameProgress * difficulty * 0.05) * Pow(1.2, gameProgress)
    return 1 + playerFactor + gameProgress * difficulty * 0.65

  // --------------------------------------------------------------------------
  static function getEnemyStatsScalar01Relative(real difficulty) returns real
    let diffValue = getGeneralDifficultyCoeff(difficulty, 1)
    let relativeTo = getGeneralDifficultyCoeff(1.0, 1)
    return diffValue / relativeTo

  // --------------------------------------------------------------------------
  static function getHeroXPScalar01(real difficulty) returns real
    return 1.0 + max(difficulty - 1.0, 0.0) * 0.25

  // --------------------------------------------------------------------------
  static function getHeroXPScalar01Relative(real difficulty) returns real
    return getHeroXPScalar01(difficulty) / getHeroXPScalar01(1.0)

  // --------------------------------------------------------------------------
  static function getLootQualityScalar01(real difficulty) returns real
    return max(difficulty - 1.0, 0.0) * 0.10

  // --------------------------------------------------------------------------
  static function getLootQualityScalar01Relative(real difficulty) returns real
    return getLootQualityScalar01(difficulty) / getLootQualityScalar01(1.0)
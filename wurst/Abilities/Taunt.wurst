package Taunt
import Orders
import UndeadTargetingComponent
import RegisterEvents

public group g_tauntingUnits = CreateGroup()

// ============================================================================
function onUnitIssuedTargetOrder()
  let orderId = GetIssuedOrderId()
  if (orderId != OrderIds.attack)
    return

  let targetUnit = GetOrderTargetUnit()
  if (not targetUnit.isAlive() or not g_tauntingUnits.contains(targetUnit))
    return

  let issuedUnit = GetOrderedUnit()
  let utc = issuedUnit.getUndeadTargetingComponent()
  if (utc == null or not utc.getEnabled())
    return

  utc.setTargetUnit(targetUnit)

// ============================================================================
init

  registerPlayerUnitEvent(EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER, function onUnitIssuedTargetOrder)
package RotateStructuresButton
import TLSMenuButton
import initlater TLSMenuBar
import Icons
import ColorUtility
import RotateStructures
import FramehandleExtensions

// ============================================================================
public class RotateStructuresButton extends TLSMenuButton
  private TLSMenuBar m_menuBar

  // --------------------------------------------------------------------------
  construct(TLSMenuBar menuBar, player _player)
    super("TLSMenuButtonTemplate")
    m_menuBar = menuBar
    
    setPlayer(_player)

    setIconPath(Icons.bTNSelectUnit)
    setIconDisabledPath(Icons.dISBTNSelectUnit)
    setTooltipNormal("Rotate Structures ({0})".format("Ctrl+R".colorize(Colors.gold)))
    setTooltipExtended("Some structures can be built facing different directions. Use this button to rotate the buildings in the build menu before building them.|n|n{0}".format("+Fences|n+Gates".colorize(Colors.gold)))

  // --------------------------------------------------------------------------
  protected override function onClicked()
    super.onClicked()
    m_menuBar.uncheckOthers(this)
    getFrameHandle().clearFocus()
    rotateStructures(getPlayer())
    if (getPlayer() == localPlayer)
      ForceUIKey("B")
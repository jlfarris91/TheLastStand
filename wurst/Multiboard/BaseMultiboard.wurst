package BaseMultiboard

// ============================================================================
public class BaseMultiboard
  private player m_player
  protected multiboard m_multiboard

  // --------------------------------------------------------------------------
  construct()
    createMultiboard()

  // --------------------------------------------------------------------------
  ondestroy
    destroyMultiboard()

  // --------------------------------------------------------------------------
  function getTargetPlayer() returns player
    return m_player

  // --------------------------------------------------------------------------
  function setTargetPlayer(player p)
    let wasVisible = m_multiboard.isDisplayed()
    
    if (wasVisible)
      hide()

    m_player = p

    if (wasVisible)
      show()

  // --------------------------------------------------------------------------
  function show()
    if (m_player == null)
      m_multiboard.show()
    else
      m_multiboard.show(m_player)

  // --------------------------------------------------------------------------
  function hide()
    m_multiboard.hide()

  // --------------------------------------------------------------------------
  private function createMultiboard()
    if (m_multiboard != null)
      return

    m_multiboard = CreateMultiboardBJ(2, 1, "")
    hide()

  // --------------------------------------------------------------------------
  private function destroyMultiboard()
    if (m_multiboard == null)
      return
    m_multiboard.destr()
    m_multiboard = null

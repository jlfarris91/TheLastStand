package SurvivorComponent
import UnitComponent
import Statistic
import SurvivorData

// ============================================================================
public class SurvivorComponent extends UnitComponent
  private SurvivorData m_survivorData

  // --------------------------------------------------------------------------
  construct(IUnitMetadata owner)
    super(owner)

  // --------------------------------------------------------------------------
  ondestroy
    m_survivorData = null

  // --------------------------------------------------------------------------
  override function getTypeId() returns int
    return SurvivorComponent.typeId

  // --------------------------------------------------------------------------
  override function initialize()
    super.initialize()

  // --------------------------------------------------------------------------
  override function onEnabled()
    super.onEnabled()

  // --------------------------------------------------------------------------
  function getSurvivorData() returns SurvivorData
    return m_survivorData

  // --------------------------------------------------------------------------
  function setSurvivorData(SurvivorData stats)
    m_survivorData = stats

  // --------------------------------------------------------------------------
  function getStatistic(string key) returns IStatistic
    return m_survivorData != null ? m_survivorData.getStatistic(key) : null

  // --------------------------------------------------------------------------
  function addStatistic(string key, IStatistic statistic)
    if (m_survivorData != null)
      m_survivorData.addStatistic(key, statistic)

// ============================================================================
public function IUnitMetadata.getSurvivorComponent() returns SurvivorComponent
  return this.getComponent(typeInfo(SurvivorComponent.typeId)) castTo SurvivorComponent

// ============================================================================
public function IUnitMetadata.getOrAddSurvivorComponent() returns SurvivorComponent
  var component = this.getSurvivorComponent()
  if (component == null)
    component = this.addComponent(new SurvivorComponent(this)) castTo SurvivorComponent
  return component
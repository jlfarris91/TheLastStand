package SurvivorJoblessComponent
import SurvivorJobComponent
import UnitMetadata
import SurvivorJobs
import LumberHarvestComponent

// ============================================================================
public class SurvivorJoblessComponent extends SurvivorJobComponent
  
  // --------------------------------------------------------------------------
  construct(IUnitMetadata owner)
    super(owner)

  // --------------------------------------------------------------------------
  override function getTypeId() returns int
    return SurvivorJoblessComponent.typeId

  // --------------------------------------------------------------------------
  override function getJob() returns SurvivorJobDefinition
    return SurvivorJobs.none

  // --------------------------------------------------------------------------
  override function onEnabled()
    super.onEnabled()
    getOwner().getOrAddLumberHarvestComponent().enable()

  // --------------------------------------------------------------------------
  override function onDisabled()
    super.onDisabled()

    let lumberHarvestComponent = getOwner().getOrAddLumberHarvestComponent()
    if (lumberHarvestComponent != null)
      lumberHarvestComponent.disable()

// ============================================================================
public function IUnitMetadata.getSurvivorJoblessComponent() returns SurvivorJoblessComponent
  return this.getComponent(typeInfo(SurvivorJoblessComponent.typeId)) castTo SurvivorJoblessComponent

// ============================================================================
public function IUnitMetadata.getOrAddSurvivorJoblessComponent() returns SurvivorJoblessComponent
  var component = this.getSurvivorJoblessComponent()
  if (component == null)
    component = this.addComponent(new SurvivorJoblessComponent(this), false) castTo SurvivorJoblessComponent
  return component

// ============================================================================
init
  SurvivorJobComponent.registerSurvivorJobComponentGetter(SurvivorJobs.none, metadata -> metadata.getSurvivorJoblessComponent())
  SurvivorJobComponent.registerSurvivorJobComponentFactory(SurvivorJobs.none, metadata -> metadata.getOrAddSurvivorJoblessComponent())
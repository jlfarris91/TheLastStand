package MilitaryBuilderJobComponent
import SurvivorJobComponent
import UnitMetadata
import SurvivorJobs
import LumberHarvestComponent

// ============================================================================
public class MilitaryBuilderJobComponent extends SurvivorJobComponent
  
  // --------------------------------------------------------------------------
  construct(IUnitMetadata owner)
    super(owner)

  // --------------------------------------------------------------------------
  override function getJob() returns SurvivorJobDefinition
    return SurvivorJobs.militaryBuilder

  // --------------------------------------------------------------------------
  override function onEnabled()
    super.onEnabled()
    getOwner().getOrAddLumberHarvestComponent().enable()

  // --------------------------------------------------------------------------
  override function onDisabled()
    super.onDisabled()

    let lumberHarvestComponent = getOwner().getOrAddLumberHarvestComponent()
    if (lumberHarvestComponent != null)
      lumberHarvestComponent.disable()

// ============================================================================
public function IUnitMetadata.getMilitaryBuilderJobComponent() returns MilitaryBuilderJobComponent
  return this.getComponent(MilitaryBuilderJobComponent.typeId) castTo MilitaryBuilderJobComponent

// ============================================================================
public function IUnitMetadata.getOrAddMilitaryBuilderJobComponent() returns MilitaryBuilderJobComponent
  var component = this.getMilitaryBuilderJobComponent()
  if (component == null)
    component = this.addComponent(new MilitaryBuilderJobComponent(this), false) castTo MilitaryBuilderJobComponent
  return component

// ============================================================================
init
  SurvivorJobComponent.registerSurvivorJobComponentGetter(SurvivorJobs.militaryBuilder, metadata -> metadata.getMilitaryBuilderJobComponent())
  SurvivorJobComponent.registerSurvivorJobComponentFactory(SurvivorJobs.militaryBuilder, metadata -> metadata.getOrAddMilitaryBuilderJobComponent())
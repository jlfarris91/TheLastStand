package DefenseBuilderJobComponent
import SurvivorJobComponent
import UnitMetadata
import SurvivorJobs
import FocusRepairComponent

// ============================================================================
public class DefenseBuilderJobComponent extends SurvivorJobComponent
  
  // --------------------------------------------------------------------------
  construct(IUnitMetadata owner)
    super(owner)

  // --------------------------------------------------------------------------
  override function getJobDefinition() returns SurvivorJobDefinition
    return SurvivorJobs.builder

  // --------------------------------------------------------------------------
  override protected function onEnabled()
    super.onEnabled()
    getOwner().getOrAddFocusRepairComponent()

// ============================================================================
public function IUnitMetadata.getDefenseBuilderJobComponent() returns DefenseBuilderJobComponent
  return this.getComponent(DefenseBuilderJobComponent.typeId) castTo DefenseBuilderJobComponent

// ============================================================================
public function IUnitMetadata.getOrAddDefenseBuilderJobComponent() returns DefenseBuilderJobComponent
  var component = this.getDefenseBuilderJobComponent()
  if (component == null)
    component = this.addComponent(new DefenseBuilderJobComponent(this), false) castTo DefenseBuilderJobComponent
  return component

// ============================================================================
init
  SurvivorJobComponent.registerSurvivorJobComponentGetter(SurvivorJobType.Builder, DefenseBuilderJobComponent.typeId)
  SurvivorJobComponent.registerSurvivorJobComponentFactory(SurvivorJobType.Builder, metadata -> metadata.getOrAddDefenseBuilderJobComponent())
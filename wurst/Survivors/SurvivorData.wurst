package SurvivorData
import HashMap
import SurvivorJobData
import StatisticsCollection
import Statistic
import SurvivorJobs

// ============================================================================
public class SurvivorData
  private string m_name
  private IterableMap<SurvivorJobDefinition, SurvivorJobData> m_jobData
  private StatisticsCollection m_stats

  // --------------------------------------------------------------------------
  construct()
    m_jobData = new IterableMap<SurvivorJobDefinition, SurvivorJobData>()
    m_stats = new StatisticsCollection()

  // --------------------------------------------------------------------------
  ondestroy
    for jobDataId in m_jobData
      destroy m_jobData.get(jobDataId)
    destroy m_jobData
    m_jobData = null

  // --------------------------------------------------------------------------
  function getName() returns string
    return m_name

  // --------------------------------------------------------------------------
  function setName(string value)
    m_name = value

  // --------------------------------------------------------------------------
  function getJobData(SurvivorJobDefinition job) returns SurvivorJobData
    var jobData = m_jobData.get(job)
    if (jobData == null)
      jobData = new SurvivorJobData()..setUnitId(job.getInitialUnitType())
      m_jobData.put(job, jobData)
    return jobData

  // --------------------------------------------------------------------------
  function getStats() returns StatisticsCollection
    return m_stats

  // --------------------------------------------------------------------------
  function setStats(StatisticsCollection stats)
    m_stats = stats

  // --------------------------------------------------------------------------
  function getStatistic(string key) returns IStatistic
    return m_stats.getStatistic(key)

  // --------------------------------------------------------------------------
  function addStatistic(string key, IStatistic statistic)
    m_stats.addStatistic(key, statistic)
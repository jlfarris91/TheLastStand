package Item_HolyBook
import JobItemDefinition
import Unit_SurvivorMale
import Unit_Priest
import Ability_BaseApplyJobItem
import TlsUnitDefinition
import ItemBuildUnitDefinition
import BuildItems
import TlsJobItemIds
import JobItemTooltipBuilder
import Icons

public JobItemDefinition g_holyBookDefinition

// ============================================================================
@compiletime function createItemAbility()
  new BaseApplyJobItemAbilityDefinition(TlsAbilityIds.applyJob_Priest)

// ============================================================================
@compiletime function createItem()

  let description = "A divine book of wisdom studied by priests the world over."
  
  let builder = JobItemTooltipBuilder.createDefault(
    g_survivorDefinition,
    g_priest1Definition,
    description)

  g_holyBookDefinition = new JobItemDefinition(TlsJobItemIds.priest1, TlsAbilityIds.applyJob_Priest)
  ..setName("Holy Book")
  ..setTooltipBasic("Holy Book")
  ..setDescription(builder.getDescription())
  ..setTooltipExtended(builder.getTooltipExtended())
  ..setInterfaceIcon(Icons.bTNSorceressMaster)
  ..setGoldCost(1)
  ..setLumberCost(300)
  ..setStockInitial(1)
  ..setStockMaximum(3)
  ..setStockStartDelay(0)
  ..setStockReplenishInterval(120)

  destroy builder

// ============================================================================
@compiletime function createItemBuildUnit()

  new ItemBuildUnitDefinition(TlsUnitIds.BuildItemUnits.priest1)
  ..setName(g_holyBookDefinition.getName())
  ..setTooltipBasic("Build " + g_holyBookDefinition.getName())
  ..setTooltipExtended(g_holyBookDefinition.getTooltipExtended())
  ..setDescription(g_holyBookDefinition.getDescription())
  ..setGoldCost(0)
  ..setLumberCost(150)
  ..setIconGameInterface(g_holyBookDefinition.getInterfaceIcon())
  ..setBuildTime(15)
  ..setButtonPositionX(0)
  ..setButtonPositionY(0)
  ..setRequirements(commaList(TlsUnitIds.headquarters1))

// ============================================================================
init
  if (g_holyBookDefinition == null)
    createItem()

  BuildItems.register(TlsJobItemIds.priest1, TlsUnitIds.BuildItemUnits.priest1)
package Item_Spearman
import JobItemDefinition
import Unit_Spearman
import Unit_SurvivorMale
import Ability_BaseApplyJobItem
import TlsUnitDefinition
import ItemBuildUnitDefinition
import BuildItems
import TlsJobItemIds
import JobItemTooltipBuilder
import TlsUpgradeIds
import GameConstants

public JobItemDefinition g_spearman1JobItemDefinition
public JobItemDefinition g_spearman2JobItemDefinition

// ============================================================================
@compiletime function createObjectDefinitions()

  new BaseApplyJobItemAbilityDefinition(TlsAbilityIds.equipJobItem_Spearman)

  createSpearman1ObjectDefinitions()
  createSpearman2ObjectDefinitions()

// ============================================================================
function createSpearman1ObjectDefinitions()

  let description = "Consists of a leather chest piece and a quiver full of spears."

  let builder = JobItemTooltipBuilder.createDefault(
    g_survivorDefinition,
    g_spearman1Definition,
    description)

  g_spearman1JobItemDefinition = new JobItemDefinition(TlsJobItemIds.spearman1, TlsAbilityIds.equipJobItem_Spearman)
  ..setName("Spearman's Equipment")
  ..setTooltipBasic("Spearman's Equipment")
  ..setDescription(builder.getDescription())
  ..setTooltipExtended(builder.getTooltipExtended())
  ..setInterfaceIcon("ReplaceableTextures\\CommandButtons\\BTNImpalingBolt.blp")
  ..setGoldCost(0)
  ..setLumberCost(600)
  ..setStockInitial(1)
  ..setStockMaximum(3)
  ..setStockStartDelay(0)
  ..setStockReplenishInterval(120)

  destroy builder

  new ItemBuildUnitDefinition(TlsUnitIds.BuildItemUnits.spearman1)
  ..setName(g_spearman1JobItemDefinition.getName())
  ..setTooltipBasic("Build " + g_spearman1JobItemDefinition.getName())
  ..setTooltipExtended(g_spearman1JobItemDefinition.getTooltipExtended())
  ..setDescription(g_spearman1JobItemDefinition.getDescription())
  ..setGoldCost(0)
  ..setLumberCost(600)
  ..setIconGameInterface(g_spearman1JobItemDefinition.getInterfaceIcon())
  ..setBuildTime(BUILD_TIME_ITEM)
  ..setButtonPositionX(0)
  ..setButtonPositionY(0)
  ..setRequirements("")

// ============================================================================
function createSpearman2ObjectDefinitions()

  let description = "Consists of a leather chest piece and a quiver full of spears."

  let builder = JobItemTooltipBuilder.createDefault(
    g_spearman1Definition,
    g_spearman2Definition,
    description)

  g_spearman2JobItemDefinition = new JobItemDefinition(TlsJobItemIds.spearman2, TlsAbilityIds.equipJobItem_Spearman)
  ..setName("Assassin's Equipment")
  ..setTooltipBasic("Assassin's Equipment")
  ..setDescription(builder.getDescription())
  ..setTooltipExtended(builder.getTooltipExtended())
  ..setInterfaceIcon("ReplaceableTextures\\CommandButtons\\BTNImpalingBolt.blp")
  ..setGoldCost(4)
  ..setLumberCost(1200)
  ..setStockInitial(1)
  ..setStockMaximum(3)
  ..setStockStartDelay(0)
  ..setStockReplenishInterval(120)

  destroy builder

  new ItemBuildUnitDefinition(TlsUnitIds.BuildItemUnits.spearman2)
  ..setName(g_spearman2JobItemDefinition.getName())
  ..setTooltipBasic("Build " + g_spearman2JobItemDefinition.getName())
  ..setTooltipExtended(g_spearman2JobItemDefinition.getTooltipExtended())
  ..setDescription(g_spearman2JobItemDefinition.getDescription())
  ..setGoldCost(4)
  ..setLumberCost(1200)
..setIconGameInterface(g_spearman2JobItemDefinition.getInterfaceIcon())
  ..setBuildTime(BUILD_TIME_ITEM)
  ..setButtonPositionX(1)
  ..setButtonPositionY(0)
  ..setRequirements(commaList(TlsUpgradeIds.spearmanNoviceTraining))
  ..setRequirementsLevels("2")

// ============================================================================
init
  if (g_spearman1JobItemDefinition == null)
    createObjectDefinitions()

  BuildItems.register(TlsJobItemIds.spearman1, TlsUnitIds.BuildItemUnits.spearman1)
  BuildItems.register(TlsJobItemIds.spearman2, TlsUnitIds.BuildItemUnits.spearman2)

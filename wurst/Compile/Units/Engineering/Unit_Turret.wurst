package Unit_Turret
import TlsBuildingDefinition
import Icons
import Abilities
import TlsUpgradeIds
import GameConstants

// ============================================================================
public class TurretDefinition extends TlsBuildingDefinition
  construct(int id)
    super(id, UnitIds.guardtower)
    setName("Turret")
    setTooltipBasic("Build Turret")
    setTooltipExtended("A ranged defensive contraption that can be highly effective when constructed in the right location. Requires a generator nearby to function.")
    setHotkey("T")
    setAnimationCastBackswing(0.0)
    setButtonPositionX(3)
    setButtonPositionY(0)
    setDeathTimeseconds(0.8)
    setGroundTexture("")
    setIconGameInterface(Icons.bTNFlakCannons)
    setModelFile("Units\\Turret\\sentrygun.mdx")
    setProjectileLaunchZ(90.0)
    setRequiredAnimationNames("upgrade,second")
    setScalingValue(0.9)
    setSelectionScale(1.5)
    setShadowTextureBuilding("")
    setTintingColorRed(150)
    setTintingColorGreen(150)
    setTintingColorBlue(150)
    setAcquisitionRange(500.0)
    setArmorSoundType(ArmorSoundType.Metal)
    setAttack1CooldownTime(0.1)
    setAttack1DamageBase(5)
    setAttack1ProjectileArc(0)
    setAttack1ProjectileArt(Abilities.bristleBackMissile)
    setAttack1ProjectileSpeed(3000)
    setAttack1Range(600)
    setAttack1TargetsAllowed("debris,ground,item,structure")
    setDeathType(DeathType.CannotRaiseDoesNotDecay)
    setArmorType(ArmorType.Fortified)
    setCollisionSize(16.0)
    setPathingMap("PathTextures\\2x2Default.tga")
    setPlacementRequires("unbuildable,unwalkable")
    setBuildTime(BUILD_TIME_BUILDING_SMALL)
    setRepairTime(REPAIR_TIME_BUILDING_SMALL)
    setHideMinimapDisplay(true)
    setHitPointsMaximumBase(250)
    setUpgradesUsed(commaList(TlsUpgradeIds.campDefense))
    setRequirements(commaList(TlsUnitIds.headquarters1))
    setUpgradesTo("")
    setSightRadiusDay(STRUCTURE_SMALL_SIGHT_RANGE_DAY)
    setSightRadiusNight(STRUCTURE_SMALL_SIGHT_RANGE_NIGHT)

    setManaInitialAmount(0)
    setManaMaximum(10)
    
    setGoldCost(4)
    setLumberCost(450)
    setRepairGoldCost(R2I(getGoldCost() * BUILDING_REPAIR_GOLD_SCALAR))
    setRepairLumberCost(R2I(getLumberCost() * BUILDING_REPAIR_LUMBER_SCALAR))
    setRecycleGoldRewarded(getGoldCost())
    setRecycleLumberRewarded(getLumberCost())

// ============================================================================
@compiletime function createUnits()

  new TurretDefinition(TlsUnitIds.turretPhysical)
    ..setName("Physical Turret Base")
    ..setButtonPositionX(0)
    ..setButtonPositionY(1)
    ..setUpgradesTo(commaList(TlsUnitIds.turretBallista, TlsUnitIds.turretCannon))
    ..setIconGameInterface(Icons.bTNFlakCannons)

  new TurretDefinition(TlsUnitIds.turretElemental)
    ..setName("Elemental Turret Base")
    ..setButtonPositionX(1)
    ..setButtonPositionY(1)
    ..setUpgradesTo(commaList(TlsUnitIds.turretFire, TlsUnitIds.turretFrost, TlsUnitIds.turretElectric))
    ..setIconGameInterface(Icons.bTNWispSplode)
  
  new TurretDefinition(TlsUnitIds.turretFire)
    ..setName("Flamethrower Turret")
    ..setButtonPositionX(0)
    ..setButtonPositionY(2)
    ..setIconGameInterface(Icons.bTNFireBolt)
  
  new TurretDefinition(TlsUnitIds.turretFrost)
    ..setName("Frost Turret")
    ..setButtonPositionX(1)
    ..setButtonPositionY(2)
    ..setIconGameInterface(Icons.bTNFrostBolt)
  
  new TurretDefinition(TlsUnitIds.turretElectric)
    ..setName("Tesla Turret")
    ..setButtonPositionX(2)
    ..setButtonPositionY(2)
    ..setIconGameInterface(Icons.bTNManaFlare)
  
  new TurretDefinition(TlsUnitIds.turretCannon)
    ..setName("Cannon Turret")
    ..setButtonPositionX(1)
    ..setButtonPositionY(2)
    ..setIconGameInterface(Icons.bTNCannonTower)
  
  new TurretDefinition(TlsUnitIds.turretBallista)
    ..setName("Ballista Turret")
    ..setButtonPositionX(0)
    ..setButtonPositionY(2)
    ..setIconGameInterface(Icons.bTNImpalingBolt)
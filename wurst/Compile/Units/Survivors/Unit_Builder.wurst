package Unit_Builder
import TlsUnitDefinition
import SurvivorJobHeroDefinition
import TlsUnitDefinitionBuilder
import TlsUpgradeIds

public SurvivorJobHeroDefinition g_builderDefinition

// ============================================================================
@compiletime function createObjectDefinitions()

  g_builderDefinition = new SurvivorJobHeroDefinition(TlsUnitIds.Survivors.builder, UnitIds.peasant)
    ..setNormalAbilities(commaList(
      TlsAbilityIds.advancedRepair,
      TlsAbilityIds.harvest,
      TlsAbilityIds.fellTree,
      TlsAbilityIds.inventory2Slots))
    ..setAcquisitionRange(500.0)
    ..setAttack1AttackType(AttackType.Normal)
    ..setAttack1CooldownTime(1.0)
    ..setAttack1Range(90)
    ..setAttack1WeaponType(WeaponType.Normal)
    ..setAttack2AttackType(AttackType.Normal)
    ..setAttack2CooldownTime(1.0)
    ..setAttack2DamageBase(10000) // To kill trees with 100k health in 10 hits
    ..setAttack2DamageNumberofDice(1)
    ..setAttack2DamageSidesperDie(2)
    ..setAttack2ProjectileSpeed(0)
    ..setAttack2Range(90)
    ..setAttack2TargetsAllowed(commaList(TargetsAllowed.tree))
    ..setAttack2WeaponSound(WeaponSound.MetalLightChop)
    ..setAttack2WeaponType(WeaponType.Normal)
    ..setAttacksEnabled(3) // Second attack lets builder chop down trees
    ..setDeathType(DeathType.CanRaiseDoesDecay)
    ..setDefenseBase(10)
    ..setArmorType(ArmorType.Medium)
    ..setDefenseUpgradeBonus(1)
    ..setHitPointsRegenerationRate(1.0)
    ..setManaMaximum(0)
    ..setManaInitialAmount(0)
    ..setSpeedBase(210)
    ..setStructuresBuilt(commaList(
      TlsUnitIds.foundationMedium,
      TlsUnitIds.foundationLarge,
      TlsUnitIds.foundationTower,
      TlsUnitIds.tunnelEntrance))
    ..setUpgradesUsed(commaList(
      TlsUpgradeIds.survivorHpBonus,
      TlsUpgradeIds.leatherArmor))
    ..setName("Builder")
    ..addUnitClass(TlsUnitClassification.HUMAN)
    ..addUnitClass(TlsUnitClassification.MELEE)
    ..build("The Builder can construct more advanced camp structures, repair structures faster and cut down trees to expand your base.",
      tooltipBuilder -> begin
        let abilities = new TooltipItem("Abilities: ")
        ..addValue("Repair x2 Speed")
        ..addValue("Lumber Harvest")
        ..addValue("Fell Trees")
        tooltipBuilder.addItem(abilities)
        let structuresBuilt = new TooltipItem("Can Build: ")
        ..addValue("Workshop")
        ..addValue("Barracks")
        ..addValue("Towers")
        tooltipBuilder.addItem(structuresBuilt)
      end)

// ============================================================================
init
  if (g_builderDefinition == null)
    createObjectDefinitions()
    
package Ability_ImmediateRepair
import TlsAbilityIds
import ChannelAbilityPreset
import Icons
import Abilities

constant real array[3] COOLDOWN = [ 60.0, 45.0, 30.0 ]
constant real array[3] CAST_RANGE = [ 50.0, 100.0, 150.0 ]

// ============================================================================
@compiletime function createAbility()
  new ChannelAbilityPreset(TlsAbilityIds.defenseInstantRepair, 3, true)
    ..removeChannelProperties(true, true)
    ..setHeroAbility(true)
    ..setItemAbility(false)
    ..presetTargetTypes(Targettype.UNIT)
    ..presetTargetsAllowed(lvl -> "mechanical,friend,nonancient,ground,air,structure,bridge,alive,dead,invu,vuln")
    ..setIconNormal(Icons.bTNRepair)
    ..setName("Immediate Repair")
    ..presetTooltipNormal(lvl -> "Immediate Repair")
    ..presetTooltipNormalExtended(lvl -> "Immediately repair a structure to full health or finish a construction in progress.")
    ..setButtonPositionNormalX(0)
    ..setButtonPositionNormalY(2)
    ..presetCooldown(lvl -> COOLDOWN[lvl-1])
    ..presetCastRange(lvl -> CAST_RANGE[lvl-1])
    ..setArtTarget(Abilities.healTarget)
package CampCenterComponent
import HumanPlayerComponent
import UnitMetadata

// ============================================================================
public class CampCenterComponent extends UnitComponent

  // --------------------------------------------------------------------------
  construct (IUnitMetadata metadata)
    super(metadata)

  // --------------------------------------------------------------------------
  override function onEnabled()
    super.onEnabled()

    let ownerUnit = getOwnerUnit()
    let playerMetadata = ownerUnit.getOwnerHumanPlayerComponent()
    if (playerMetadata != null)
      playerMetadata.addCampCenter(ownerUnit)

  // --------------------------------------------------------------------------
  override function onDisabled()
    super.onDisabled()

    let ownerUnit = getOwnerUnit()
    let playerMetadata = ownerUnit.getOwnerHumanPlayerComponent()
    if (playerMetadata != null)
      playerMetadata.removeCampCenter(ownerUnit)

// ============================================================================
public function IUnitMetadata.getCampCenterComponent() returns CampCenterComponent
  return this.getComponent(CampCenterComponent.typeId) castTo CampCenterComponent

// ============================================================================
public function IUnitMetadata.getOrAddCampCenterComponent() returns CampCenterComponent
  var component = this.getCampCenterComponent()
  if (component == null)
    component = this.addComponent(new CampCenterComponent(this)) castTo CampCenterComponent
  return component
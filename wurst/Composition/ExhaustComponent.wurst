package ExhaustComponent
import Composition
import UnitMetadata
import TlsUnitIds
import TlsAbilityIds

public class ExhaustionComponent extends Component

  private int _level = 1

  construct(IComposite owner)
    super(owner)

  function setLevel(int level)
    _level = level

  function getLevel() returns int
    return _level

  function exhaustUnit()
    let ownerPlayer = (_owner castTo IUnitMetadata).getUnit().getOwner()
    let spawnPos = gg_rct_BaseUnits.randomPoint()
    let caster = CreateUnit(ownerPlayer, TlsUnitIds.exhaustCasterDummy, spawnPos.x, spawnPos.y, 0)
    caster.setAbilityLevel(TlsAbilityIds.sprintExhaust, _level)

public function IUnitMetadata.getOrAddExhaustionComponent() returns ExhaustionComponent
  var component = this.getComponent(ExhaustionComponent.typeId) castTo ExhaustionComponent
  if (component == null)
    component = this.addComponent(new ExhaustionComponent(this)) castTo ExhaustionComponent
  return component
package Roles
import SurvivorJobs
import HashList
import TlsUpgradeIds
import TlsUnitIds
import PlayerExtensions

public class Roles


// ============================================================================
public class Role
  private HashList<SurvivorJobDefinition> m_allowedJobs = new HashList<SurvivorJobDefinition>()

  // --------------------------------------------------------------------------
  construct()
    addAllowedJob(SurvivorJobs.acolyte)

  // --------------------------------------------------------------------------
  function addAllowedJob(SurvivorJobDefinition job)
    m_allowedJobs.add(job)

  // --------------------------------------------------------------------------
  function isJobAllowed(SurvivorJobDefinition job) returns bool
    return job == SurvivorJobs.none or m_allowedJobs.has(job)

  // --------------------------------------------------------------------------
  function activate(player _forPlayer)
    skip

// ============================================================================
public class BuilderRole extends Role

  // --------------------------------------------------------------------------
  construct()
    addAllowedJob(SurvivorJobs.builder)
    addAllowedJob(SurvivorJobs.acolyte)

  // --------------------------------------------------------------------------
  override function activate(player forPlayer)
    forPlayer.setUnitAvailability(TlsUnitIds.rangedTarget, false)

// ============================================================================
public class ProcuristRole extends Role

  // --------------------------------------------------------------------------
  construct()
    // addAllowedJob(SurvivorJobs.scout)
    // addAllowedJob(SurvivorJobs.hunter)

  // --------------------------------------------------------------------------
  override function activate(player forPlayer)
    forPlayer.setTechAvailability(TlsUpgradeIds.campDefense, false)

// ============================================================================
public class WarriorRole extends Role

  // --------------------------------------------------------------------------
  construct()
    addAllowedJob(SurvivorJobs.militia)
    addAllowedJob(SurvivorJobs.spearman)
    addAllowedJob(SurvivorJobs.marksman)
    addAllowedJob(SurvivorJobs.medic)

  // --------------------------------------------------------------------------
  override function activate(player forPlayer)
    forPlayer.setTechAvailability(TlsUpgradeIds.campDefense, false)
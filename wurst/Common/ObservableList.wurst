package ObservableList
import LinkedList
import Events

/**
 * A double-linked list that can be observed for add/remove/clear operations.
*/
public class ObservableList<T>

  private LinkedList<T> _items

  GenericArgsEvent<ObservableList<T>, T> itemAdded
  GenericArgsEvent<ObservableList<T>, T> itemRemoved
  GenericEvent<ObservableList<T>> collectionCleared

  construct()
    _items = new LinkedList<T>()

  ondestroy
    destroy _items
    destroy itemAdded
    destroy itemRemoved
    destroy collectionCleared

  function add(T elem)
    _items.add(elem)
    itemAdded.invoke(this, elem)

  function remove(T elem)
    _items.remove(elem)
    itemRemoved.invoke(this, elem)

  function clear()
    _items.clear()
    collectionCleared.invoke(this)
